<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quản lý đánh giá</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdn.datatables.net/1.13.4/css/dataTables.bootstrap5.min.css" rel="stylesheet">
    <style>
        :root {
            --primary-color: #4e73df;
            --success-color: #1cc88a;
            --warning-color: #f6c23e;
            --danger-color: #e74a3b;
            --info-color: #36b9cc;
        }

        body {
            background-color: #f8f9fc;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        .navbar {
            box-shadow: 0 0.15rem 1.75rem 0 rgba(58, 59, 69, 0.15);
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .user-avatar {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            border: 2px solid rgba(255, 255, 255, 0.3);
        }

        .user-text {
            text-align: right;
        }

        .user-name {
            color: white;
            font-weight: 600;
            font-size: 0.95rem;
            margin-bottom: 2px;
        }

        .user-role {
            color: rgba(255, 255, 255, 0.8);
            font-size: 0.8rem;
        }

        .navbar-brand.hidden {
            display: none;
        }

        .page-header {
            background: linear-gradient(135deg, var(--primary-color) 0%, #2e59d9 100%);
            color: white;
            padding: 2rem;
            border-radius: 15px;
            margin-bottom: 2rem;
            box-shadow: 0 0.15rem 1.75rem 0 rgba(58, 59, 69, 0.3);
        }

        .stat-card {
            border-radius: 15px;
            border: none;
            box-shadow: 0 0.15rem 1.75rem 0 rgba(58, 59, 69, 0.15);
            transition: transform 0.3s ease;
            overflow: hidden;
            height: 100%;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .filter-card {
            border: none;
            border-radius: 15px;
            box-shadow: 0 0.15rem 1.75rem 0 rgba(58, 59, 69, 0.1);
        }

        .table-container {
            background: white;
            border-radius: 15px;
            box-shadow: 0 0.15rem 1.75rem 0 rgba(58, 59, 69, 0.15);
            overflow: hidden;
        }

        .table th {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 1rem;
            font-weight: 600;
        }

        .table td {
            padding: 1rem;
            vertical-align: middle;
            border-color: #e3e6f0;
        }

        .table-hover tbody tr:hover {
            background-color: rgba(78, 115, 223, 0.05);
        }

        .reviewer-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .reviewer-avatar {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid #e3e6f0;
        }

        .reviewer-name {
            font-weight: 600;
            color: #2e3a59;
            margin-bottom: 2px;
        }

        .reviewer-email {
            font-size: 0.85rem;
            color: #6c757d;
        }

        .star-rating {
            color: #ffc107;
            font-size: 1.1rem;
        }

        .star-rating .far {
            color: #e3e6f0;
        }

        .review-comment {
            max-width: 300px;
            word-wrap: break-word;
            line-height: 1.5;
        }

        .product-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .product-image {
            width: 60px;
            height: 60px;
            object-fit: cover;
            border-radius: 8px;
            border: 1px solid #e3e6f0;
        }

        .product-name {
            font-weight: 600;
            color: #2e3a59;
            margin-bottom: 2px;
        }

        .product-category {
            font-size: 0.85rem;
            color: #6c757d;
        }

        .status-badge {
            padding: 0.4rem 0.8rem;
            border-radius: 15px;
            font-size: 0.85rem;
            font-weight: 500;
        }

        .status-approved {
            background-color: rgba(28, 200, 138, 0.2);
            color: var(--success-color);
        }

        .status-pending {
            background-color: rgba(246, 194, 62, 0.2);
            color: var(--warning-color);
        }

        .status-rejected {
            background-color: rgba(231, 74, 59, 0.2);
            color: var(--danger-color);
        }

        .action-buttons .btn {
            border-radius: 8px;
            padding: 0.4rem 0.8rem;
            font-size: 0.85rem;
            font-weight: 500;
        }

        .btn-group-custom .btn {
            margin: 0 2px;
        }

        .review-date {
            font-size: 0.85rem;
            color: #6c757d;
        }

        .pagination .page-item .page-link {
            border-radius: 8px;
            margin: 0 2px;
            border: none;
            color: var(--primary-color);
        }

        .pagination .page-item.active .page-link {
            background-color: var(--primary-color);
            color: white;
        }

        .alert-custom {
            border-radius: 10px;
            border: none;
            box-shadow: 0 0.15rem 1.75rem 0 rgba(58, 59, 69, 0.1);
        }

        @media (max-width: 768px) {
            .user-text {
                display: none;
            }

            .page-header {
                padding: 1.5rem 1rem;
            }

            .page-header h1 {
                font-size: 1.8rem;
            }

            .action-buttons {
                display: flex;
                flex-direction: column;
                gap: 5px;
            }

            .reviewer-info, .product-info {
                flex-direction: column;
                align-items: flex-start;
                gap: 5px;
            }

            .reviewer-avatar, .product-image {
                width: 40px;
                height: 40px;
            }
        }
    </style>
</head>
<body>
<!-- Header -->
<nav class="navbar navbar-expand-lg navbar-dark">
    <div class="container-fluid">
        <a class="navbar-brand hidden" href="#">
            <i class="fas fa-cogs"></i> Admin Panel
        </a>
        <div class="ms-auto">
            <div class="user-info">
                <div class="user-text">
                    <div class="user-name">Administrator</div>
                    <div class="user-role">Quản trị viên</div>
                </div>
                <div class="user-avatar">
                    <i class="fas fa-user-shield text-white"></i>
                </div>
            </div>
        </div>
    </div>
</nav>

<div class="container-fluid mt-4">
    <div class="row">
        <!-- Sử dụng sidebar chung -->
        <div th:replace="admin/sidebar :: sidebar"></div>

        <!-- Main content -->
        <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
            <!-- Flash Messages -->
            <div th:if="${success}" class="alert alert-success alert-custom alert-dismissible fade show" role="alert">
                <i class="fas fa-check-circle me-2"></i>
                <span th:text="${success}"></span>
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            </div>
            <div th:if="${error}" class="alert alert-danger alert-custom alert-dismissible fade show" role="alert">
                <i class="fas fa-exclamation-circle me-2"></i>
                <span th:text="${error}"></span>
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            </div>

            <!-- Page Header -->
            <div class="page-header">
                <div class="row align-items-center">
                    <div class="col-md-8">
                        <h1 class="h2 mb-0"><i class="fas fa-star me-2"></i>Quản lý đánh giá</h1>
                        <p class="mb-0 mt-2 opacity-75">Quản lý và kiểm duyệt đánh giá sản phẩm từ người dùng</p>
                    </div>
                    <div class="col-md-4 text-md-end">
                        <button class="btn btn-light btn-lg" id="bulkApproveBtn">
                            <i class="fas fa-check-double me-2"></i>Phê duyệt hàng loạt
                        </button>
                    </div>
                </div>
            </div>

            <!-- Statistics -->
            <div class="row mb-4">
                <div class="col-xl-3 col-md-6 mb-4">
                    <div class="card stat-card border-left-primary shadow h-100 py-2">
                        <div class="card-body">
                            <div class="row no-gutters align-items-center">
                                <div class="col mr-2">
                                    <div class="text-xs font-weight-bold text-primary text-uppercase mb-1">
                                        Tổng đánh giá
                                    </div>
                                    <div class="h5 mb-0 font-weight-bold text-gray-800" th:text="${reviews != null ? reviews.size() : 0}">0</div>
                                </div>
                                <div class="col-auto">
                                    <i class="fas fa-star fa-2x text-primary"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-xl-3 col-md-6 mb-4">
                    <div class="card stat-card border-left-warning shadow h-100 py-2">
                        <div class="card-body">
                            <div class="row no-gutters align-items-center">
                                <div class="col mr-2">
                                    <div class="text-xs font-weight-bold text-warning text-uppercase mb-1">
                                        Chờ phê duyệt
                                    </div>
                                    <div class="h5 mb-0 font-weight-bold text-gray-800">
                                        <span th:text="${pendingCount != null ? pendingCount : 0}">0</span>
                                    </div>
                                    <div class="text-warning small">
                                        <i class="fas fa-clock me-1"></i>Cần xem xét
                                    </div>
                                </div>
                                <div class="col-auto">
                                    <i class="fas fa-clock fa-2x text-warning"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-xl-3 col-md-6 mb-4">
                    <div class="card stat-card border-left-success shadow h-100 py-2">
                        <div class="card-body">
                            <div class="row no-gutters align-items-center">
                                <div class="col mr-2">
                                    <div class="text-xs font-weight-bold text-success text-uppercase mb-1">
                                        Đã phê duyệt
                                    </div>
                                    <div class="h5 mb-0 font-weight-bold text-gray-800">
                                        <span th:text="${approvedCount != null ? approvedCount : 0}">0</span>
                                    </div>
                                    <div class="text-success small">
                                        <i class="fas fa-arrow-up me-1"></i>12.5%
                                    </div>
                                </div>
                                <div class="col-auto">
                                    <i class="fas fa-check-circle fa-2x text-success"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-xl-3 col-md-6 mb-4">
                    <div class="card stat-card border-left-danger shadow h-100 py-2">
                        <div class="card-body">
                            <div class="row no-gutters align-items-center">
                                <div class="col mr-2">
                                    <div class="text-xs font-weight-bold text-danger text-uppercase mb-1">
                                        Đã từ chối
                                    </div>
                                    <div class="h5 mb-0 font-weight-bold text-gray-800">
                                        <span th:text="${rejectedCount != null ? rejectedCount : 0}">0</span>
                                    </div>
                                </div>
                                <div class="col-auto">
                                    <i class="fas fa-times-circle fa-2x text-danger"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Search and Filter -->
            <div class="card filter-card mb-4">
                <div class="card-body">
                    <div class="row g-3">
                        <div class="col-md-4">
                            <label class="form-label fw-bold">Tìm kiếm đánh giá</label>
                            <div class="input-group">
                                <span class="input-group-text"><i class="fas fa-search"></i></span>
                                <input type="text" class="form-control" id="searchInput" placeholder="Tên sản phẩm, người dùng, nội dung...">
                            </div>
                        </div>
                        <div class="col-md-3">
                            <label class="form-label fw-bold">Trạng thái</label>
                            <select class="form-select" id="statusFilter">
                                <option value="">Tất cả trạng thái</option>
                                <option value="PENDING">Chờ phê duyệt</option>
                                <option value="APPROVED">Đã phê duyệt</option>
                                <option value="REJECTED">Đã từ chối</option>
                            </select>
                        </div>
                        <div class="col-md-3">
                            <label class="form-label fw-bold">Số sao</label>
                            <select class="form-select" id="ratingFilter">
                                <option value="">Tất cả sao</option>
                                <option value="5">5 sao</option>
                                <option value="4">4 sao</option>
                                <option value="3">3 sao</option>
                                <option value="2">2 sao</option>
                                <option value="1">1 sao</option>
                            </select>
                        </div>
                        <div class="col-md-2 d-flex align-items-end">
                            <button class="btn btn-outline-secondary w-100" id="resetFilters">
                                <i class="fas fa-redo me-1"></i>Đặt lại
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Reviews Table -->
            <div class="table-container">
                <div class="card-header bg-white border-bottom-0 py-3">
                    <div class="d-flex justify-content-between align-items-center">
                        <h5 class="card-title mb-0 fw-bold">
                            <i class="fas fa-list me-2"></i>Danh sách đánh giá
                            <span class="badge bg-primary ms-2" th:text="${reviews != null ? reviews.size() : 0}">0</span>
                        </h5>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="selectAllReviews">
                            <label class="form-check-label fw-bold" for="selectAllReviews">
                                Chọn tất cả
                            </label>
                        </div>
                    </div>
                </div>

                <div class="card-body p-0">
                    <div class="table-responsive">
                        <table class="table table-hover mb-0" id="reviewsTable">
                            <thead>
                            <tr>
                                <th width="50">
                                    <input type="checkbox" class="form-check-input" id="selectAll">
                                </th>
                                <th width="80">Người đánh giá</th>
                                <th width="200">Sản phẩm</th>
                                <th width="150">Đánh giá</th>
                                <th width="100">Số sao</th>
                                <th width="120">Ngày đánh giá</th>
                                <th width="120">Trạng thái</th>
                                <th width="140" class="text-center">Hành động</th>
                            </tr>
                            </thead>
                            <tbody>
                            <!-- Example Review 1 -->
                            <tr>
                                <td>
                                    <input type="checkbox" class="form-check-input review-checkbox" data-review-id="1">
                                </td>
                                <td>
                                    <div class="reviewer-info">
                                        <img src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=100&h=100&fit=crop&crop=face"
                                             class="reviewer-avatar"
                                             alt="Nguyễn Văn A">
                                        <div>
                                            <div class="reviewer-name">Nguyễn Văn A</div>
                                            <div class="reviewer-email">nguyenvana@example.com</div>
                                        </div>
                                    </div>
                                </td>
                                <td>
                                    <div class="product-info">
                                        <img src="https://images.unsplash.com/photo-1542291026-7eec264c27ff?w=100&h=100&fit=crop"
                                             class="product-image"
                                             alt="Nike Air Max 270">
                                        <div>
                                            <div class="product-name">Nike Air Max 270</div>
                                            <div class="product-category">Giày thể thao</div>
                                        </div>
                                    </div>
                                </td>
                                <td>
                                    <div class="review-comment">
                                        Giày rất đẹp và thoải mái. Chất lượng tốt, đúng như mô tả. Tôi rất hài lòng với sản phẩm này.
                                    </div>
                                </td>
                                <td>
                                    <div class="star-rating">
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                    </div>
                                    <div class="text-center fw-bold">5.0</div>
                                </td>
                                <td>
                                    <div class="fw-bold">15/01/2024</div>
                                    <div class="review-date">14:30</div>
                                </td>
                                <td>
                                        <span class="status-badge status-approved">
                                            <i class="fas fa-check me-1"></i>Đã phê duyệt
                                        </span>
                                </td>
                                <td class="text-center">
                                    <div class="btn-group-custom">
                                        <button class="btn btn-outline-info btn-sm" data-bs-toggle="modal" data-bs-target="#viewReviewModal">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                        <button class="btn btn-outline-success btn-sm" onclick="approveReview(1)">
                                            <i class="fas fa-check"></i>
                                        </button>
                                        <button class="btn btn-outline-danger btn-sm" data-bs-toggle="modal" data-bs-target="#deleteModal">
                                            <i class="fas fa-trash"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>

                            <!-- Example Review 2 -->
                            <tr>
                                <td>
                                    <input type="checkbox" class="form-check-input review-checkbox" data-review-id="2">
                                </td>
                                <td>
                                    <div class="reviewer-info">
                                        <img src="https://images.unsplash.com/photo-1494790108755-2616b612b786?w=100&h=100&fit=crop&crop=face"
                                             class="reviewer-avatar"
                                             alt="Trần Thị B">
                                        <div>
                                            <div class="reviewer-name">Trần Thị B</div>
                                            <div class="reviewer-email">tranthib@example.com</div>
                                        </div>
                                    </div>
                                </td>
                                <td>
                                    <div class="product-info">
                                        <img src="https://images.unsplash.com/photo-1600185365483-26d7a4cc7519?w=100&h=100&fit=crop"
                                             class="product-image"
                                             alt="Adidas Ultraboost 21">
                                        <div>
                                            <div class="product-name">Adidas Ultraboost 21</div>
                                            <div class="product-category">Giày thể thao</div>
                                        </div>
                                    </div>
                                </td>
                                <td>
                                    <div class="review-comment">
                                        Giày đẹp nhưng size hơi nhỏ so với bình thường. Nên chọn size lớn hơn 0.5.
                                    </div>
                                </td>
                                <td>
                                    <div class="star-rating">
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="far fa-star"></i>
                                    </div>
                                    <div class="text-center fw-bold">4.0</div>
                                </td>
                                <td>
                                    <div class="fw-bold">20/01/2024</div>
                                    <div class="review-date">11:15</div>
                                </td>
                                <td>
                                        <span class="status-badge status-pending">
                                            <i class="fas fa-clock me-1"></i>Chờ phê duyệt
                                        </span>
                                </td>
                                <td class="text-center">
                                    <div class="btn-group-custom">
                                        <button class="btn btn-outline-info btn-sm" data-bs-toggle="modal" data-bs-target="#viewReviewModal">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                        <button class="btn btn-outline-success btn-sm" onclick="approveReview(2)">
                                            <i class="fas fa-check"></i>
                                        </button>
                                        <button class="btn btn-outline-warning btn-sm" onclick="rejectReview(2)">
                                            <i class="fas fa-times"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>

                            <!-- Example Review 3 -->
                            <tr>
                                <td>
                                    <input type="checkbox" class="form-check-input review-checkbox" data-review-id="3">
                                </td>
                                <td>
                                    <div class="reviewer-info">
                                        <img src="https://images.unsplash.com/photo-1500648767791-00dcc994a43e?w=100&h=100&fit=crop&crop=face"
                                             class="reviewer-avatar"
                                             alt="Lê Văn C">
                                        <div>
                                            <div class="reviewer-name">Lê Văn C</div>
                                            <div class="reviewer-email">levanc@example.com</div>
                                        </div>
                                    </div>
                                </td>
                                <td>
                                    <div class="product-info">
                                        <img src="https://images.unsplash.com/photo-1606107557195-0e29a4b5b4aa?w=100&h=100&fit=crop"
                                             class="product-image"
                                             alt="Jordan 1 Retro High">
                                        <div>
                                            <div class="product-name">Jordan 1 Retro High</div>
                                            <div class="product-category">Giày thời trang</div>
                                        </div>
                                    </div>
                                </td>
                                <td>
                                    <div class="review-comment">
                                        Chất lượng không như mong đợi. Đế giày bị mòn nhanh sau 2 tuần sử dụng.
                                    </div>
                                </td>
                                <td>
                                    <div class="star-rating">
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="far fa-star"></i>
                                        <i class="far fa-star"></i>
                                        <i class="far fa-star"></i>
                                    </div>
                                    <div class="text-center fw-bold">2.0</div>
                                </td>
                                <td>
                                    <div class="fw-bold">05/02/2024</div>
                                    <div class="review-date">09:45</div>
                                </td>
                                <td>
                                        <span class="status-badge status-rejected">
                                            <i class="fas fa-times me-1"></i>Đã từ chối
                                        </span>
                                </td>
                                <td class="text-center">
                                    <div class="btn-group-custom">
                                        <button class="btn btn-outline-info btn-sm" data-bs-toggle="modal" data-bs-target="#viewReviewModal">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                        <button class="btn btn-outline-success btn-sm" onclick="approveReview(3)">
                                            <i class="fas fa-check"></i>
                                        </button>
                                        <button class="btn btn-outline-danger btn-sm" data-bs-toggle="modal" data-bs-target="#deleteModal">
                                            <i class="fas fa-trash"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Pagination -->
                <div class="card-footer bg-white border-top-0">
                    <div class="d-flex justify-content-between align-items-center">
                        <div class="text-muted">
                            Hiển thị <span class="fw-bold">1-3</span> trong tổng số <span class="fw-bold">128</span> đánh giá
                        </div>
                        <nav aria-label="Page navigation">
                            <ul class="pagination mb-0">
                                <li class="page-item disabled">
                                    <a class="page-link" href="#" tabindex="-1">
                                        <i class="fas fa-chevron-left"></i>
                                    </a>
                                </li>
                                <li class="page-item active"><a class="page-link" href="#">1</a></li>
                                <li class="page-item"><a class="page-link" href="#">2</a></li>
                                <li class="page-item"><a class="page-link" href="#">3</a></li>
                                <li class="page-item"><a class="page-link" href="#">4</a></li>
                                <li class="page-item"><a class="page-link" href="#">5</a></li>
                                <li class="page-item">
                                    <a class="page-link" href="#">
                                        <i class="fas fa-chevron-right"></i>
                                    </a>
                                </li>
                            </ul>
                        </nav>
                    </div>
                </div>
            </div>
        </main>
    </div>
</div>

<!-- View Review Modal -->
<div class="modal fade" id="viewReviewModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title"><i class="fas fa-eye me-2"></i>Xem chi tiết đánh giá</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-md-4">
                        <div class="mb-4">
                            <h6 class="fw-bold mb-3">Người đánh giá</h6>
                            <div class="reviewer-info">
                                <img src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=100&h=100&fit=crop&crop=face"
                                     class="reviewer-avatar"
                                     alt="Nguyễn Văn A">
                                <div>
                                    <div class="reviewer-name">Nguyễn Văn A</div>
                                    <div class="reviewer-email">nguyenvana@example.com</div>
                                </div>
                            </div>
                        </div>
                        <div class="mb-4">
                            <h6 class="fw-bold mb-3">Thông tin sản phẩm</h6>
                            <div class="product-info">
                                <img src="https://images.unsplash.com/photo-1542291026-7eec264c27ff?w=100&h=100&fit=crop"
                                     class="product-image"
                                     alt="Nike Air Max 270">
                                <div>
                                    <div class="product-name">Nike Air Max 270</div>
                                    <div class="product-category">Giày thể thao</div>
                                    <div class="text-primary fw-bold mt-1">3,200,000₫</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-8">
                        <div class="mb-4">
                            <h6 class="fw-bold mb-3">Đánh giá chi tiết</h6>
                            <div class="star-rating mb-3" style="font-size: 1.5rem;">
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                            </div>
                            <div class="bg-light p-3 rounded">
                                <p class="mb-0">Giày rất đẹp và thoải mái. Chất lượng tốt, đúng như mô tả. Tôi rất hài lòng với sản phẩm này. Đế giày êm ái, màu sắc đẹp, vừa chân. Sẽ tiếp tục ủng hộ cửa hàng.</p>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <h6 class="fw-bold mb-3">Thông tin bổ sung</h6>
                                <ul class="list-unstyled">
                                    <li class="mb-2">
                                        <i class="fas fa-calendar me-2 text-primary"></i>
                                        <span class="fw-bold">Ngày đánh giá:</span> 15/01/2024 14:30
                                    </li>
                                    <li class="mb-2">
                                        <i class="fas fa-tag me-2 text-primary"></i>
                                        <span class="fw-bold">Trạng thái:</span>
                                        <span class="status-badge status-approved">
                                            <i class="fas fa-check me-1"></i>Đã phê duyệt
                                        </span>
                                    </li>
                                    <li class="mb-2">
                                        <i class="fas fa-shopping-cart me-2 text-primary"></i>
                                        <span class="fw-bold">Mã đơn hàng:</span> #DH001245
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Đóng</button>
                <button type="button" class="btn btn-primary" onclick="approveReview(1)">Phê duyệt</button>
                <button type="button" class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#deleteModal">Xóa</button>
            </div>
        </div>
    </div>
</div>

<!-- Delete Confirmation Modal -->
<div class="modal fade" id="deleteModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title text-danger"><i class="fas fa-exclamation-triangle me-2"></i>Xác nhận xóa</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>Bạn có chắc chắn muốn xóa đánh giá này?</p>
                <p class="text-muted small">Hành động này không thể hoàn tác. Đánh giá sẽ bị xóa vĩnh viễn khỏi hệ thống.</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Hủy</button>
                <button type="button" class="btn btn-danger">Xóa đánh giá</button>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.datatables.net/1.13.4/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.13.4/js/dataTables.bootstrap5.min.js"></script>
<script>
    $(document).ready(function() {
        // Initialize DataTable
        $('#reviewsTable').DataTable({
            language: {
                url: '//cdn.datatables.net/plug-ins/1.13.4/i18n/vi.json'
            },
            pageLength: 10,
            responsive: true,
            order: [[0, 'desc']],
            columnDefs: [
                { orderable: false, targets: [0, 7] }
            ]
        });

        // Filter functionality
        $('#searchInput').on('keyup', function() {
            $('#reviewsTable').DataTable().search($(this).val()).draw();
        });

        $('#statusFilter, #ratingFilter').on('change', function() {
            $('#reviewsTable').DataTable().draw();
        });

        $('#resetFilters').on('click', function() {
            $('#searchInput').val('');
            $('#statusFilter').val('');
            $('#ratingFilter').val('');
            $('#reviewsTable').DataTable().search('').draw();
        });

        // Select all functionality
        $('#selectAll').on('change', function() {
            $('.review-checkbox').prop('checked', this.checked);
        });

        $('#selectAllReviews').on('change', function() {
            $('#selectAll').prop('checked', this.checked);
            $('.review-checkbox').prop('checked', this.checked);
        });

        // Bulk approve
        $('#bulkApproveBtn').on('click', function() {
            const selectedReviews = [];
            $('.review-checkbox:checked').each(function() {
                selectedReviews.push($(this).data('review-id'));
            });

            if (selectedReviews.length === 0) {
                alert('Vui lòng chọn ít nhất một đánh giá để phê duyệt.');
                return;
            }

            if (confirm(`Bạn có chắc muốn phê duyệt ${selectedReviews.length} đánh giá đã chọn?`)) {
                // In real app, make AJAX call to bulk approve
                alert(`Đã phê duyệt ${selectedReviews.length} đánh giá thành công!`);
                // Reload page or update UI
                location.reload();
            }
        });

        // Review approval function
        window.approveReview = function(reviewId) {
            if (confirm(`Bạn có chắc muốn phê duyệt đánh giá #${reviewId}?`)) {
                // In real app, make AJAX call to approve review
                alert(`Đã phê duyệt đánh giá #${reviewId} thành công!`);
                // Reload page or update UI
                location.reload();
            }
        };

        // Review rejection function
        window.rejectReview = function(reviewId) {
            const reason = prompt('Vui lòng nhập lý do từ chối đánh giá này:');
            if (reason !== null) {
                // In real app, make AJAX call to reject review with reason
                alert(`Đã từ chối đánh giá #${reviewId}. Lý do: ${reason}`);
                // Reload page or update UI
                location.reload();
            }
        };

        // View review modal data population
        $('#viewReviewModal').on('show.bs.modal', function(event) {
            const button = $(event.relatedTarget);
            const row = button.closest('tr');
            const reviewerName = row.find('.reviewer-name').text();
            const reviewerEmail = row.find('.reviewer-email').text();
            const productName = row.find('.product-name').text();
            const rating = row.find('.text-center.fw-bold').text();
            const comment = row.find('.review-comment').text();

            // In real app, you would populate all fields from the database
            // This is just an example
        });

        // Auto dismiss alerts after 5 seconds
        setTimeout(function() {
            var alerts = document.querySelectorAll('.alert');
            alerts.forEach(function(alert) {
                var bsAlert = new bootstrap.Alert(alert);
                bsAlert.close();
            });
        }, 5000);

        // Hover effect on review rows
        $('#reviewsTable tbody tr').hover(
            function() {
                $(this).css('transform', 'translateX(5px)');
            },
            function() {
                $(this).css('transform', 'translateX(0)');
            }
        );
    });
</script>
</body>
</html>